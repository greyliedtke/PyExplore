{% extends 'base.html' %}

{% block content %}
<style>
    .color-box {
        width: 200px;
        height: 200px;
        border: 2px solid black;
        margin-top: 10px;
        /* Add some spacing */
    }
</style>

<div class="container">

    <body>
        <div class="mb-3"></div>

        <div class="card card-body">
            <h3 class="card-title">RGB</h3>
            <a href="https://en.wikipedia.org/wiki/RGB_color_model"> RGB color model</a>
            <section class="container">
                <div>
                    <label for="red">Red:</label>
                    <input type="range" id="red" min="0" max="255" value="0">
                </div>
                <div>
                    <label for="green">Green:</label>
                    <input type="range" id="green" min="0" max="255" value="0">
                </div>
                <div>
                    <label for="blue">Blue:</label>
                    <input type="range" id="blue" min="0" max="255" value="0">
                </div>
                <div class="color-box" id="color-box"></div>
                <button class="btn btn-success" onclick="sendPi('rgb')">Send Color</button>
            </section>
        </div>
        <div class="mb-3"></div>
        <div class="card card-body">
            <h3 class="card-title">Modes</h3>
            <button class="btn btn-outline-primary" onclick="sendPi('Clock')">Clock</button>
            <div class="mb-3"></div>
            <button class="btn btn-outline-primary" onclick="sendPi('Bounce')">Bounce</button>
            <div class="mb-3"></div>
            <button class="btn btn-outline-primary" onclick="sendPi('image1')">Image</button>
        </div>
</div>
<div class="mb-3"></div>
<script>
    const redSlider = document.getElementById('red');
    const greenSlider = document.getElementById('green');
    const blueSlider = document.getElementById('blue');
    const colorBox = document.getElementById('color-box');

    function updateColor() {
        const red = redSlider.value;
        const green = greenSlider.value;
        const blue = blueSlider.value;
        const color = `rgb(${red}, ${green}, ${blue})`;
        colorBox.style.backgroundColor = color;
    }
    redSlider.addEventListener('input', updateColor);
    greenSlider.addEventListener('input', updateColor);
    blueSlider.addEventListener('input', updateColor);

    // Initialize color
    updateColor();



    function sendPi(data) {
        if (data == 'rgb') {
            data = {
                red: redSlider.value,
                green: greenSlider.value,
                blue: blueSlider.value
            }
        }

        fetch("/pi", {
            method: "POST",
            headers: {
                "Content-Type": "application/json;charset=UTF-8"
            },
            body: JSON.stringify(data)
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                console.log('Data sent successfully');
                console.log(data);
            })
            .catch(error => {
                console.error('Error occurred:', error);
            });
    }

</script>
{% endblock %}